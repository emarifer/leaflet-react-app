import{L as m,l as g,j as h,r as f,v as x,R as O,a as I}from"./vendor.8c770ff7.js";const N=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};N();const y={"Mapa raster IGN - Spain":m.tileLayer.wms("http://www.ign.es/wms-inspire/mapa-raster",{layers:"mtn_rasterizado",crossOrigin:!0,format:"image/png",transparent:!1,continuousWorld:!0,attribution:'\xA9 <a href="http://www.ign.es/ign/main/index.do" target="_blank">Instituto Geogr\xE1fico Nacional de Espa\xF1a</a> contributors'}),"Ortoimagen PNOA - Spain":m.tileLayer.wms("http://www.ign.es/wms-inspire/pnoa-ma",{layers:"OI.OrthoimageCoverage",crossOrigin:!0,format:"image/png",transparent:!1,continuousWorld:!0,attribution:'PNOA cedido por \xA9 <a href="http://www.ign.es/ign/main/index.do" target="_blank">Instituto Geogr\xE1fico Nacional de Espa\xF1a</a> contributors'}),OpenStreetMap:m.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{crossOrigin:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),OpenTopoMap:m.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{crossOrigin:!0,attribution:'&copy; <a target="_blank" href="https://opentopomap.org">OpenTopoMap</a> contributors'})};let e,u,c,s;function S(){M(),e=L.map("map",{layers:[y["Mapa raster IGN - Spain"]]}).fitBounds([[24.9300000311,-19.6],[46.0700000311,5.6]]),L.control.layers(y).addTo(e),L.control.scale({options:{position:"bottomleft",metric:!0}}).addTo(e)}function M(){delete g.exports.Icon.Default.prototype._getIconUrl,g.exports.Icon.Default.mergeOptions({iconRetinaUrl:"markers/marker-icon-2x.png",iconUrl:"markers/marker-icon.png",shadowUrl:"markers/marker-shadow.png"})}function F(t){v();const r=t.target,n=new FileReader;n.onload=()=>{const l=n.result;w(l)},n.readAsText(r.files[0])}function w(t){u=new L.GPX(t,{async:!0,marker_options:{wptIconUrls:{"":"markers/pin-icon-wpt.png"},startIconUrl:"markers/pin-icon-start.png",endIconUrl:"markers/pin-icon-end.png",shadowUrl:"markers/pin-shadow.png"}}).on("loaded",r=>{const n=r.target;e.fitBounds(n.getBounds())}).addTo(e),window.localStorage.setItem("gpx",t)}function v(){u&&e.hasLayer(u)&&(e.removeLayer(u),u=null),window.localStorage.removeItem("gpx")}function R(){c&&s?(e.stopLocate(),e.hasLayer(s)&&e.hasLayer(c)&&(e.removeLayer(s),e.removeLayer(c),c=s=null)):E()}function C(t){let r=t.accuracy/2;e.hasLayer(s)&&e.hasLayer(c)&&(e.removeLayer(s),e.removeLayer(c)),c=new L.Marker(t.latlng,{draggable:!0}),s=new L.circle(t.latlng,r),s.bindPopup(`Est\xE1s a menos de ${r} metros de este punto`).openPopup(),e.addLayer(c),e.addLayer(s)}function E(){e&&(e.locate({watch:!0,timeout:5e3}),e.on("locationfound",C))}function j(){"caches"in window&&caches.delete("cache-map").then(t=>{console.log(t,"clear cache-map operation")}).catch(t=>{console.log(t)})}const i=h.exports.jsx,k=h.exports.jsxs,A="btn location",T="btn remove",U="btn cache";function P(){const[t,r]=f.exports.useState(!1);return f.exports.useEffect(()=>{R()},[t]),f.exports.useEffect(()=>{S();const n=window.localStorage.getItem("gpx");n&&n.length!==0&&w(n)},[]),i("div",{className:"App",children:k("header",{className:"App-header",children:[i("h3",{children:"Ejemplo de App con Leaflet y React js"}),k("div",{className:"controls",children:[i("label",{className:"input-label",htmlFor:"input-track",children:"Seleccionar Track\u2026"}),i("button",{title:"Start Geolocation",onClick:()=>r(!t),className:A,children:"\u{1F4CC}"}),i("button",{title:"Remove the track from the map",onClick:v,className:T,children:"\u{1F5D1}\uFE0F"}),i("button",{title:"Remove Map Cache",onClick:j,className:U,children:"\u{1F5FA}\uFE0F"})]}),i("input",{type:"file",accept:"application/gpx+xml",id:"input-track",onChange:F}),i("div",{id:"map"})]})})}function _(t={}){const{immediate:r=!1,onNeedRefresh:n,onOfflineReady:l,onRegistered:o,onRegisterError:a}=t;let p;const b=async(d=!0)=>{};return"serviceWorker"in navigator&&(p=new x("/leaflet-react-app/sw.js",{scope:"/leaflet-react-app/"}),p.addEventListener("activated",d=>{d.isUpdate?window.location.reload():l==null||l()}),p.register({immediate:r}).then(d=>{o==null||o(d)}).catch(d=>{a==null||a(d)})),b}O.render(i(I.StrictMode,{children:i(P,{})}),document.getElementById("root"));_();
